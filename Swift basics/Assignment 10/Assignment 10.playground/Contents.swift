import Foundation


//MARK: 1. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— CreatureType enum-áƒ˜ áƒ¡áƒ®áƒ•áƒáƒ“áƒáƒ¡áƒ®áƒ•áƒ áƒ¢áƒ˜áƒžáƒ˜áƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ— (áƒ›áƒáƒ’: fire, water, earth, air, electric â€¦). áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— associated value, áƒ áƒáƒ› áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒš áƒ¢áƒ˜áƒžáƒ¡ áƒ°áƒ¥áƒáƒœáƒ“áƒ”áƒ¡ rarity: Double áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ 0-áƒ“áƒáƒœ 1-áƒ›áƒ“áƒ”. áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ— computed property description, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ“áƒáƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¢áƒ˜áƒžáƒ˜áƒ¡ áƒáƒ¦áƒ¬áƒ”áƒ áƒáƒ¡.â€¨

enum CreatureType {
    case fire(rarity: Double)
    case water(rarity: Double)
    case earth(rarity: Double)
    case air(rarity: Double)
    case electric(rarity: Double)
    
    var description: String {
        switch self {
        case .fire(let rarity):
            return "Fire type rarity: \(rarity)"
        case .water(let rarity):
            return "Water type rarity: \(rarity)"
        case .earth(let rarity):
            return "Earth type rarity: \(rarity)"
        case .air(let rarity):
            return "Air type rarity: \(rarity)"
        case .electric(let rarity):
            return "Electric type rarity: \(rarity)"
        }
    }
}

//MARK: 2. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒžáƒ áƒáƒ¢áƒáƒ™áƒáƒšáƒ˜ CreatureStats áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’áƒ˜ áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ”áƒ‘áƒ˜áƒ—:
//* var health: Double
//* var attack: Double
//* var defense: Double
//* func updateStats(health: Double, attack: Double, defense: Double) áƒ›áƒ”áƒ—áƒáƒ“áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ’áƒáƒœáƒáƒáƒ®áƒšáƒ”áƒ‘áƒ¡ áƒáƒ› áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ¡ (áƒ¨áƒ”áƒ’áƒ˜áƒ«áƒšáƒ˜áƒáƒ— áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒžáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ”áƒ‘áƒ˜ áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜áƒ¡áƒáƒ›áƒ”áƒ‘áƒ  áƒ¨áƒ”áƒªáƒ•áƒáƒšáƒáƒ—, áƒ›áƒáƒ’: áƒ“áƒ”áƒ¤áƒáƒšáƒ¢ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ”áƒ‘áƒ˜ áƒ’áƒáƒ£áƒ¬áƒ”áƒ áƒáƒ— ðŸ˜Œ)â€¨

protocol CreatureStats {
    var health: Double { get set }
    var attack: Double { get set }
    var defense: Double { get set }
    
    func updateStats(health: Double, attack: Double, defense: Double)
}

//MARK: 3. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ™áƒšáƒáƒ¡áƒ˜ Trainer áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’áƒ˜ áƒ¤áƒ áƒáƒ¤áƒ”áƒ áƒ—áƒ”áƒ‘áƒ˜áƒ—:
//* public let name: String
//* private var creatures: [DigitalCreature]
//* áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ— public áƒ›áƒ”áƒ—áƒáƒ“áƒ˜ add(creature: DigitalCreature) áƒ áƒáƒ›áƒšáƒ˜áƒ—áƒáƒª áƒ¨áƒ”áƒ«áƒšáƒ”áƒ‘áƒ— áƒáƒ®áƒáƒšáƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒáƒ¡ áƒ›áƒáƒ¡áƒ˜áƒ•áƒ¨áƒ˜, áƒáƒ¡áƒ”áƒ•áƒ” áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ¡ áƒ¡áƒáƒ™áƒ£áƒ—áƒáƒ  áƒ—áƒáƒ•áƒ¡ (self) áƒ“áƒáƒ£áƒ¡áƒ”áƒ¢áƒáƒ•áƒ¡ áƒ¢áƒ áƒ”áƒœáƒ”áƒ áƒáƒ“.


class Trainer {
    public let name: String
    private var creatures: [DigitalCreature] = []
    
    init(name: String) {
        self.name = name
    }
    
    public func add(creature: DigitalCreature) {
        creatures.append(creature)
        creature.trainer = self
    }
}

//MARK: 4. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ™áƒšáƒáƒ¡áƒ˜ DigitalCreature, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ“áƒáƒáƒ™áƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ”áƒ‘áƒ¡ CreatureStats áƒžáƒ áƒáƒ¢áƒáƒ™áƒáƒšáƒ¡. áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ—:
//    * public let name: String
//    * public let type: CreatureType
//    * public var level: Int
//    * public var experience: Double
//    * weak public var trainer: Trainer?
//    * áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ— deinit áƒ›áƒ”áƒ—áƒáƒ“áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ“áƒáƒ‘áƒ”áƒ­áƒ“áƒáƒ•áƒ¡ áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒáƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒáƒ¨áƒšáƒ˜áƒ¡áƒáƒ¡.â€¨

class DigitalCreature: CreatureStats {
    var health: Double
    var attack: Double
    var defense: Double
    public let name: String
    public let type: CreatureType
    public var level: Int
    public var experience: Double
    weak public var trainer: Trainer?
    
    init(name: String, type: CreatureType, level: Int, experience: Double, health: Double, attack: Double, defense: Double) {
        self.name = name
        self.type = type
        self.level = level
        self.experience = experience
        self.health = health
        self.attack = attack
        self.defense = defense
    }
    
    func updateStats(health: Double = 100, attack: Double = 10, defense: Double = 50) {
        self.health = health
        self.attack = attack
        self.defense = defense
    }
    
    deinit {
        print("\(name) is removed")
    }
}

//MARK: 5. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— CreatureManager áƒ™áƒšáƒáƒ¡áƒ˜ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’áƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒœáƒáƒšáƒ˜áƒ—:
//    * private var creatures: [DigitalCreature] - áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ¡áƒ˜áƒ•áƒ˜
//    * public func adoptCreature(_ creature: DigitalCreature) - áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ
//    * public func trainCreature(named name: String) - áƒ™áƒáƒœáƒ™áƒ áƒ”áƒ¢áƒ£áƒšáƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒ•áƒ áƒ—áƒœáƒ (áƒ’áƒáƒ˜áƒ—áƒ•áƒáƒšáƒ˜áƒ¡áƒ¬áƒ˜áƒœáƒ”áƒ— áƒ áƒáƒ› áƒ¬áƒ•áƒ áƒ—áƒœáƒ áƒ›áƒáƒ®áƒ“áƒ”áƒ‘áƒ áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ›áƒáƒ¨áƒ˜áƒœ áƒ—áƒ£ áƒáƒ áƒ©áƒ”áƒ£áƒš áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ¡ áƒ§áƒáƒ•áƒ¡ áƒ›áƒ¬áƒ•áƒ áƒ—áƒœáƒ”áƒšáƒ˜!)
//    * public func listCreatures() -> [DigitalCreature] - áƒ§áƒ•áƒ”áƒšáƒ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ˜áƒ˜áƒ¡ áƒ“áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒâ€¨â€¨áƒ’áƒáƒáƒ¤áƒáƒ áƒ—áƒáƒ•áƒ”áƒ— CreatureManage áƒ™áƒšáƒáƒ¡áƒ˜ áƒ›áƒ”áƒ—áƒáƒ“áƒ˜áƒ— func trainAllCreatures(), áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ’áƒáƒ¬áƒ•áƒ áƒ—áƒœáƒ˜áƒ¡ áƒ§áƒ•áƒ”áƒšáƒ áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ¡.â€¨

class CreatureManager {
    private var creatures: [DigitalCreature] = []
    
    public func adoptCreature(_ creature: DigitalCreature) {
        creatures.append(creature)
    }
    
    public func trainCreature(named name: String) {
        for creature in creatures where creature.name == name {
            if let trainer = creature.trainer {
                creature.experience += 50
                creature.attack += 15
                creature.defense += 10
                creature.level += 1
                print("Training \(creature.name) by \(trainer.name)")
            }
        }
    }
    
    public func listCreatures() -> [DigitalCreature] {
        return creatures
    }
    
}

extension CreatureManager {
    func trainAllCreatures() {
        for creature in creatures {
            if let trainer = creature.trainer {
                creature.experience += 50
                creature.attack += 15
                creature.defense += 10
                creature.level += 1
                print("\(trainer.name) trained \(creature.name)")
            }
        }
    }
}

//MARK: 6. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— CreatureShop áƒ™áƒšáƒáƒ¡áƒ˜ áƒ›áƒ”áƒ—áƒáƒ“áƒ˜áƒ— purchaseRandomCreature() -> DigitalCreature. áƒ”áƒ¡ áƒ›áƒ”áƒ—áƒáƒ“áƒ˜ áƒ“áƒáƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ¡ áƒ áƒáƒœáƒ“áƒáƒ›áƒ˜áƒ–áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒáƒ“ áƒ“áƒáƒ’áƒ”áƒœáƒ”áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒš áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ¡.â€¨


class CreatureShop {
    func purchaseRandomCreature() -> DigitalCreature {
        let creatureTypes: [CreatureType] = [
            .fire(rarity: Double.random(in: 0...1)),
            .water(rarity: Double.random(in: 0...1)),
            .earth(rarity: Double.random(in: 0...1)),
            .air(rarity: Double.random(in: 0...1)),
            .electric(rarity: Double.random(in: 0...1))
        ]
        
        let randomType = creatureTypes.randomElement()!
        let names = ["Nini", "Giorgi", "Sandro", "Saba", "Nika", "Ana", "Soso", "Salome"]
        let randomCreature = DigitalCreature(name: names.randomElement()!,
                                             type: randomType,
                                             level: 1,
                                             experience: 0,
                                             health: 100,
                                             attack: Double.random(in: 10...50),
                                             defense: 5)
        return randomCreature
    }
}

//MARK: 7. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ’áƒšáƒáƒ‘áƒáƒšáƒ£áƒ áƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ updateLeaderboard(players: [CreatureManager]) -> [CreatureManager], áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ“áƒáƒáƒšáƒáƒ’áƒ”áƒ‘áƒ¡ áƒ›áƒáƒ—áƒáƒ›áƒáƒ¨áƒ”áƒ”áƒ‘áƒ¡ áƒ›áƒáƒ—áƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¯áƒáƒ›áƒ£áƒ áƒ˜ áƒ«áƒáƒšáƒ˜áƒ¡ áƒ›áƒ˜áƒ®áƒ”áƒ“áƒ•áƒ˜áƒ—. â€¨


func updateLeaderboard(players: [CreatureManager]) -> [CreatureManager] {
    return players.sorted { player1, player2  in
        let totalAttack1 = player1.listCreatures().reduce(0) { $0 + $1.attack }
        let totalAttack2 = player2.listCreatures().reduce(0) { $0 + $1.attack }
        return totalAttack1 > totalAttack2
    }
}

//MARK: 8. áƒ’áƒáƒ›áƒáƒ•áƒ˜áƒ§áƒ”áƒœáƒáƒ— áƒ¬áƒ˜áƒœáƒ áƒ¢áƒáƒ¡áƒ™áƒ”áƒ‘áƒ¨áƒ˜ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ˜áƒšáƒ˜ áƒ§áƒ•áƒ”áƒšáƒ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒœáƒáƒšáƒ˜:
//* áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜áƒ›áƒ” Trainer áƒáƒ‘áƒ˜áƒ”áƒ¥áƒ¢áƒ˜
//* áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜áƒ›áƒ” CreatureManager áƒáƒ‘áƒ˜áƒ”áƒ¥áƒ¢áƒ˜
//* áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒ”áƒ áƒ—áƒ˜ áƒáƒœ áƒáƒ áƒ˜ CreatureShop
//* áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒšáƒ˜ áƒ›áƒ”áƒœáƒ”áƒ¯áƒ”áƒ áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡:
//    * áƒ¨áƒ”áƒ˜áƒ«áƒ˜áƒœáƒ”áƒ— áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜áƒ›áƒ” áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ˜áƒ—áƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ CreatureShop-áƒ˜áƒ“áƒáƒœ
//    * áƒ›áƒ˜áƒáƒ‘áƒáƒ áƒ”áƒ— áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜áƒ›áƒ” áƒáƒ áƒ¡áƒ”áƒ‘áƒ áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒ›áƒ” áƒ¢áƒ áƒ”áƒœáƒ”áƒ áƒ¡.
//    * áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒ•áƒ áƒ—áƒœáƒ CreatureManager-áƒ˜áƒ¡ trainCreature(named:) áƒ›áƒ”áƒ—áƒáƒ“áƒ˜áƒ—
//* áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— CreatureManager-áƒ˜áƒ¡ trainAllCreatures() áƒ›áƒ”áƒ—áƒáƒ“áƒ˜ áƒ§áƒ•áƒ”áƒšáƒ áƒ›áƒáƒ—áƒáƒ›áƒáƒ¨áƒ˜áƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒ¬áƒ•áƒ áƒ—áƒœáƒ”áƒšáƒáƒ“ (áƒ—áƒ£ áƒ§áƒáƒ•áƒ¡ áƒ›áƒ¬áƒ•áƒ áƒ—áƒœáƒ”áƒšáƒ˜, áƒ áƒ áƒ—áƒ¥áƒ›áƒ áƒ£áƒœáƒ“áƒ)
//* áƒ’áƒáƒœáƒáƒáƒ®áƒšáƒ”áƒ— áƒšáƒ˜áƒ“áƒ”áƒ áƒ‘áƒáƒ áƒ“áƒ˜ updateLeaderboard() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒ˜áƒ—
//* áƒ“áƒáƒ‘áƒ”áƒ­áƒ“áƒ”áƒ— áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒšáƒ˜ áƒ›áƒáƒ—áƒáƒ›áƒáƒ¨áƒ˜áƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ˜áƒ áƒ“áƒ áƒ›áƒáƒ—áƒ˜ áƒ¡áƒ¢áƒáƒ¢áƒ˜áƒ¡áƒ¢áƒ˜áƒ™áƒ
//* áƒ¬áƒáƒ¨áƒáƒšáƒ”áƒ— áƒ”áƒ áƒ—áƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒ›áƒ” Trainer-áƒ˜áƒ“áƒáƒœ áƒ“áƒ áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ—, áƒ áƒáƒ› weak reference áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ¡ áƒ¡áƒ¬áƒáƒ áƒáƒ“ (áƒ“áƒáƒ‘áƒ”áƒ­áƒ“áƒ”áƒ— áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ trainer property-áƒ¡ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ áƒ¬áƒáƒ¨áƒšáƒáƒ›áƒ“áƒ” áƒ“áƒ áƒ¬áƒáƒ¨áƒšáƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’)
//* áƒ“áƒáƒáƒ™áƒ•áƒ˜áƒ áƒ“áƒ˜áƒ— deinit áƒ›áƒ”áƒ—áƒáƒ“áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ«áƒáƒ®áƒ”áƒ‘áƒáƒ¡ áƒáƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒáƒ¨áƒšáƒ˜áƒ¡áƒáƒ¡â€¨


let creatureShop1 = CreatureShop()
let creatureShop2 = CreatureShop()

let trainer1 = Trainer(name: "Nika")
let trainer2 = Trainer(name: "Giorgi")
let trainer3 = Trainer(name: "Lasha")

let creatureManager1 = CreatureManager()
let creatureManager2 = CreatureManager()

let randomCreature1 = creatureShop1.purchaseRandomCreature()
let randomCreature2 = creatureShop1.purchaseRandomCreature()
let randomCreature3 = creatureShop2.purchaseRandomCreature()
let randomCreature4 = creatureShop2.purchaseRandomCreature()

creatureManager1.adoptCreature(randomCreature1)
creatureManager1.adoptCreature(randomCreature2)
creatureManager2.adoptCreature(randomCreature3)
creatureManager2.adoptCreature(randomCreature4)

randomCreature1.trainer = trainer1
randomCreature2.trainer = trainer2
randomCreature3.trainer = trainer3

creatureManager1.trainCreature(named: randomCreature1.name)
creatureManager1.trainCreature(named: randomCreature2.name)
creatureManager2.trainCreature(named: randomCreature3.name)
creatureManager2.trainCreature(named: randomCreature4.name)


creatureManager1.trainAllCreatures()
creatureManager2.trainAllCreatures()

print("Manager 1:")
for creature in creatureManager1.listCreatures() {
    print("creature is \(creature.name), Trainer name is\(creature.trainer?.name ?? "None") and  Experience is \(creature.experience)")
}
print("Manager 2:")
for creature in creatureManager2.listCreatures() {
    print("creature is \(creature.name), Trainer name is  \(creature.trainer?.name ?? "None") and  Experience is \(creature.experience)")
}

let leaderBoard = updateLeaderboard(players: [creatureManager1, creatureManager2])

print("LeaderBoard by power")
for (index, players) in leaderBoard.enumerated() {
    print("Rank \(index + 1):")
    
    for player in players.listCreatures() {
        print("\(player.name) - \(player.attack)")
    }
}

print(randomCreature1.trainer?.name ?? "No trainer")


randomCreature1.trainer = nil

print(randomCreature1.trainer?.name ?? "No trainer")



//MARK: 9. áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— BattleSimulator áƒ™áƒšáƒáƒ¡áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ›áƒáƒ áƒ—áƒáƒ•áƒ¡ áƒáƒ  DigitalCreature-áƒ¡ áƒ¨áƒáƒ áƒ˜áƒ¡ áƒ‘áƒ áƒ«áƒáƒšáƒáƒ¡.
//    * áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— weak/unowned áƒ›áƒ˜áƒ›áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒšáƒ”áƒ‘áƒ˜ áƒ¡áƒáƒ—áƒáƒœáƒáƒ“áƒáƒ“, áƒ áƒáƒ—áƒ áƒ—áƒáƒ•áƒ˜áƒ“áƒáƒœ áƒáƒ˜áƒªáƒ˜áƒšáƒáƒ— áƒ”.áƒ¬ memory leak.
//    * áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ— áƒ›áƒ”áƒ—áƒáƒ“áƒ˜ simulateBattle(between creature1: DigitalCreature, and creature2: DigitalCreature) -> DigitalCreature, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ“áƒáƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ¡ áƒ’áƒáƒ›áƒáƒ áƒ¯áƒ•áƒ”áƒ‘áƒ£áƒšáƒ¡. áƒ›áƒ”áƒ—áƒáƒ“áƒ˜áƒ¡ áƒšáƒáƒ’áƒ˜áƒ™áƒáƒ¡ áƒ áƒáƒ’áƒáƒ áƒ¡ áƒ’áƒáƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¤áƒáƒœáƒ¢áƒáƒ–áƒ˜áƒáƒ–áƒ”áƒ áƒ“áƒáƒ›áƒáƒ™áƒ˜áƒ“áƒ”áƒ‘áƒ£áƒšáƒ˜ ðŸ™Œ
//    * áƒ’áƒáƒ›áƒáƒ áƒ—áƒ”áƒ— áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜áƒ›áƒ” áƒ‘áƒ áƒ«áƒáƒšáƒ áƒ“áƒ áƒ“áƒáƒ‘áƒ”áƒ­áƒ“áƒ”áƒ— áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ”áƒ‘áƒ˜. ðŸ¤º

class BattleSimulator {
    
    func simulateBattle(between creature1: DigitalCreature, and creature2: DigitalCreature) -> DigitalCreature {
        print("Battle is starting between")
        print("\(creature1.name) and \(creature2.name)")
        
        var creature1Health: Double {
            creature2.attack - creature1.defense
        }
        
        var creature2Health: Double {
            creature1.attack - creature2.defense
        }
        
        if creature1Health > creature2Health {
            print("\(creature1.name) won!")
            return creature1
        } else if creature2Health > creature1Health {
            print("\(creature2.name) won!")
            return creature2
        } else {
            print("It's a draw!")
            return creature1
        }
    }
}


let creature1 = DigitalCreature(name: "Iron Man", type: .fire(rarity: 0.8), level: 5, experience: 200, health: 100, attack: 30, defense: 15)
let creature2 = DigitalCreature(name: "Captain America", type: .water(rarity: 0.6), level: 5, experience: 150, health: 100, attack: 54, defense: 18)

let battleSimulator = BattleSimulator()

let winner1 = battleSimulator.simulateBattle(between: creature1, and: creature2)

print("Final results:")
print("Winner of battle: \(winner1.name)")


